function pcTextWidth(e,t){$fakeEl=jQuery("<span>").hide().appendTo(document.body),$fakeEl.text(e).css("font",t);var a=$fakeEl.width();return $fakeEl.remove(),a}function PickleCalendarRowSetup(){jQuery(".pickle-calendar-event.multiday").each(function(){var e=jQuery(this).data("eventTotalDays");jQuery(this).css("width",98*e+"%"),jQuery(this).pcEventOffset()})}jQuery(document).ready(function(r){r("body").on("click",".pickle-calendar .cal-nav",function(e){e.preventDefault();var t={action:"bscal_nav",month:r(this).data("month"),year:r(this).data("year")};r.post(pickleCalOpts.ajax_url,t,function(e){var t=r(".pickle-calendar").parent();console.log(e),t.html(""),t.append(e),r(document).trigger("pickle_calendar_ajax_load",e),PickleCalendarRowSetup(),pcalEqualHeight(".pickle-calendar .calendar-day")})}),r("body").on("change",".pickle-calendar-filters .filter-term",function(e){var t=r(this).parents(".pickle-calendar-filters"),l=t.data("filters").split(",");if(this.checked)l.push(r(this).val());else{var a=l.indexOf(r(this).val());-1<a&&l.splice(a,1)}l=l.filter(function(e){return""!==e}),t.data("filters",l.join()),r(".pickle-calendar .pickle-calendar-event").each(function(e){var t=r(this).attr("class").split(" "),a=0;if(0===l.length)r(this).removeClass("filter-hide");else{for(var i=0;i<l.length;i++)for(var n=0;n<t.length;n++)l[i]==t[n]&&a++;0===a?r(this).addClass("filter-hide"):r(this).removeClass("filter-hide")}})}),r("body").on("click",".pickle-calendar-filters .filter-tab",function(e){e.preventDefault();var n=r(this).data("tabSlug");r(".pickle-calendar-filters .filter-tab").each(function(){r(this).removeClass("active")}),r(this).addClass("active"),"all"==n&&(n=""),r(".pickle-calendar .pickle-calendar-event").each(function(e){var t=r(this).attr("class").split(" "),a=0;if(0===n.length)r(this).removeClass("filter-hide");else{for(var i=0;i<t.length;i++)n==t[i]&&a++;0===a?r(this).addClass("filter-hide"):r(this).removeClass("filter-hide")}})})}),jQuery(window).load(function(){PickleCalendarRowSetup(),pcalEqualHeight(".pickle-calendar .calendar-day")}),jQuery(window).resize(function(){PickleCalendarRowSetup(),pcalEqualHeight(".pickle-calendar .calendar-day")}),function(l){pcalEqualHeight=function(e){var t,a=0,i=0,n=[];l(e).each(function(){if(t=l(this),l(t).height("auto"),topPostion=t.position().top,i!=topPostion){for(currentDiv=0;currentDiv<n.length;currentDiv++)n[currentDiv].height(a);n.length=0,i=topPostion,a=t.height(),n.push(t)}else n.push(t),a=a<t.height()?t.height():a;for(currentDiv=0;currentDiv<n.length;currentDiv++)n[currentDiv].height(a)})},l.fn.pcEventOffset=function(){var e=jQuery(this).offset(),t=(new Date(jQuery(this).data("eventDate")+"T00:00:00"),new Date(jQuery(this).data("eventDate")+"T00:00:00"));t.setDate(t.getDate()-1);var a=new Date(t),i=("0"+a.getDate()).slice(-2),n=("0"+(a.getMonth()+1)).slice(-2),l=a.getFullYear()+"-"+n+"-"+i,r=jQuery(".pickle-calendar").find(".pickle-calendar-event[data-event-date='"+l+"'][data-event-id='"+jQuery(this).data("eventId")+"']");void 0!==r.offset()&&r.offset().top!=e.top&&(jQuery(this).css({"margin-top":r.offset().top-e.top}),r.offset().top!=jQuery(this).offset().top&&jQuery(this).css({"margin-top":parseInt(jQuery(this).css("margin-top"))+(r.offset().top-jQuery(this).offset().top)}))}}(jQuery);