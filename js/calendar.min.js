function pcalEqualHeight(e){var a,t=0,i=0,l=[],r=0,n=0;jQuery(e).each(function(){if(a=jQuery(this),jQuery(a).height("auto"),r=a.position().top,i!==r){for(n=0;n<l.length;n++)l[n].height(t);l.length=0,i=r,t=a.height(),l.push(a)}else l.push(a),t=t<a.height()?a.height():t;for(n=0;n<l.length;n++)l[n].height(t)})}function PickleCalendarRowSetup(){jQuery(".pickle-calendar-event.multiday").each(function(){jQuery(this).pcEventOffset()})}function pcShowAJAXLoader(e){var a=jQuery("<div/>",{class:"pc-loader-image-container"}).appendTo(e).show();jQuery("<img/>",{src:pickleCalOpts.pluginURL+"images/ajax-loader.gif",class:"pc-loader-image"}).appendTo(a)}function pcHideAJAXLoader(){jQuery(".pc-loader-image-container").remove()}jQuery(document).ready(function(r){r("body").on("click",".pickle-calendar .cal-nav",function(e){e.preventDefault();var a={action:"bscal_nav",month:r(this).data("month"),year:r(this).data("year"),security:pickleCalOpts.ajax_nonce};pcShowAJAXLoader(".pickle-calendar"),r.post(pickleCalOpts.ajax_url,a,function(e){var a=r(".pickle-calendar").parent();a.html(""),a.append(e),r(document).trigger("pickle_calendar_ajax_load",e),PickleCalendarRowSetup(),pcalEqualHeight(".pickle-calendar .calendar-day")})}),r("body").on("change",".pickle-calendar-filters .filter-term",function(){var e=r(this).parents(".pickle-calendar-filters"),l=e.data("filters").split(",");if(this.checked)l.push(r(this).val());else{var a=l.indexOf(r(this).val());-1<a&&l.splice(a,1)}l=l.filter(function(e){return""!==e}),e.data("filters",l.join()),r(".pickle-calendar .pickle-calendar-event").each(function(){var e=r(this).attr("class").split(" "),a=0;if(0===l.length)r(this).removeClass("filter-hide");else{for(var t=0;t<l.length;t++)for(var i=0;i<e.length;i++)l[t]===e[i]&&a++;0===a?r(this).addClass("filter-hide"):r(this).removeClass("filter-hide")}})}),r("body").on("click",".pickle-calendar-filters .filter-tab",function(e){e.preventDefault();var i=r(this).data("tabSlug");r(".pickle-calendar-filters .filter-tab").each(function(){r(this).removeClass("active")}),r(this).addClass("active"),"all"===i&&(i=""),r(".pickle-calendar .pickle-calendar-event").each(function(){var e=r(this).attr("class").split(" "),a=0;if(0===i.length)r(this).removeClass("filter-hide");else{for(var t=0;t<e.length;t++)i===e[t]&&a++;0===a?r(this).addClass("filter-hide"):r(this).removeClass("filter-hide")}})})}),jQuery(window).load(function(){PickleCalendarRowSetup(),pcalEqualHeight(".pickle-calendar .calendar-day")}),jQuery(window).resize(function(){PickleCalendarRowSetup(),pcalEqualHeight(".pickle-calendar .calendar-day")}),jQuery.fn.pcEventOffset=function(){var e=jQuery(this).offset(),a=new Date(jQuery(this).data("eventDate")+"T00:00:00"),t=!1,i=jQuery(this).parents(".calendar-day");a.setDate(a.getDate()-1),i.hasClass("first-of-week")&&(t=!0),i.hasClass("last-of-week");var l=new Date(a),r=("0"+l.getDate()).slice(-2),n=("0"+(l.getMonth()+1)).slice(-2),c=l.getFullYear()+"-"+n+"-"+r,s=jQuery(".pickle-calendar").find('.pickle-calendar-event[data-event-date="'+c+'"][data-event-id="'+jQuery(this).data("eventId")+'"]');!0!==t&&void 0!==s.offset()&&s.offset().top!==e.top&&(jQuery(this).css({"margin-top":s.offset().top-e.top}),s.offset().top!==jQuery(this).offset().top&&jQuery(this).css({"margin-top":parseInt(jQuery(this).css("margin-top"),10)+(s.offset().top-jQuery(this).offset().top)}))};