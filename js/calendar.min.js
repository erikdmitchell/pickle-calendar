function pcTextWidth(e,t){$fakeEl=jQuery("<span>").hide().appendTo(document.body),$fakeEl.text(e).css("font",t);var a=$fakeEl.width();return $fakeEl.remove(),a}function PickleCalendarRowSetup(){jQuery(".pickle-calendar-event.multiday").each(function(){var e=jQuery(this).data("eventTotalDays");jQuery(this).css("width",98*e+"%"),jQuery(this).pcEventOffset()})}function pcShowAJAXLoader(e){var t=jQuery("<div/>",{class:"pc-loader-image-container"}).appendTo(e).show();jQuery("<img/>",{src:pickleCalOpts.pluginURL+"images/ajax-loader.gif",class:"pc-loader-image"}).appendTo(t)}function pcHideAJAXLoader(){jQuery(".pc-loader-image-container").remove()}jQuery(document).ready(function(l){l("body").on("click",".pickle-calendar .cal-nav",function(e){e.preventDefault();var t={action:"bscal_nav",month:l(this).data("month"),year:l(this).data("year")};pcShowAJAXLoader(".pickle-calendar"),l.post(pickleCalOpts.ajax_url,t,function(e){var t=l(".pickle-calendar").parent();t.html(""),t.append(e),l(document).trigger("pickle_calendar_ajax_load",e),PickleCalendarRowSetup(),pcalEqualHeight(".pickle-calendar .calendar-day")})}),l("body").on("change",".pickle-calendar-filters .filter-term",function(e){var t=l(this).parents(".pickle-calendar-filters"),r=t.data("filters").split(",");if(this.checked)r.push(l(this).val());else{var a=r.indexOf(l(this).val());-1<a&&r.splice(a,1)}r=r.filter(function(e){return""!==e}),t.data("filters",r.join()),l(".pickle-calendar .pickle-calendar-event").each(function(e){var t=l(this).attr("class").split(" "),a=0;if(0===r.length)l(this).removeClass("filter-hide");else{for(var i=0;i<r.length;i++)for(var n=0;n<t.length;n++)r[i]==t[n]&&a++;0===a?l(this).addClass("filter-hide"):l(this).removeClass("filter-hide")}})}),l("body").on("click",".pickle-calendar-filters .filter-tab",function(e){e.preventDefault();var n=l(this).data("tabSlug");l(".pickle-calendar-filters .filter-tab").each(function(){l(this).removeClass("active")}),l(this).addClass("active"),"all"==n&&(n=""),l(".pickle-calendar .pickle-calendar-event").each(function(e){var t=l(this).attr("class").split(" "),a=0;if(0===n.length)l(this).removeClass("filter-hide");else{for(var i=0;i<t.length;i++)n==t[i]&&a++;0===a?l(this).addClass("filter-hide"):l(this).removeClass("filter-hide")}})})}),jQuery(window).load(function(){PickleCalendarRowSetup(),pcalEqualHeight(".pickle-calendar .calendar-day")}),jQuery(window).resize(function(){PickleCalendarRowSetup(),pcalEqualHeight(".pickle-calendar .calendar-day")}),function(r){pcalEqualHeight=function(e){var t,a=0,i=0,n=[];r(e).each(function(){if(t=r(this),r(t).height("auto"),topPostion=t.position().top,i!=topPostion){for(currentDiv=0;currentDiv<n.length;currentDiv++)n[currentDiv].height(a);n.length=0,i=topPostion,a=t.height(),n.push(t)}else n.push(t),a=a<t.height()?t.height():a;for(currentDiv=0;currentDiv<n.length;currentDiv++)n[currentDiv].height(a)})},r.fn.pcEventOffset=function(){var e=jQuery(this).offset(),t=(new Date(jQuery(this).data("eventDate")+"T00:00:00"),new Date(jQuery(this).data("eventDate")+"T00:00:00"));t.setDate(t.getDate()-1);var a=new Date(t),i=("0"+a.getDate()).slice(-2),n=("0"+(a.getMonth()+1)).slice(-2),r=a.getFullYear()+"-"+n+"-"+i,l=jQuery(".pickle-calendar").find(".pickle-calendar-event[data-event-date='"+r+"'][data-event-id='"+jQuery(this).data("eventId")+"']");void 0!==l.offset()&&l.offset().top!=e.top&&(jQuery(this).css({"margin-top":l.offset().top-e.top}),l.offset().top!=jQuery(this).offset().top&&jQuery(this).css({"margin-top":parseInt(jQuery(this).css("margin-top"))+(l.offset().top-jQuery(this).offset().top)}))}}(jQuery);